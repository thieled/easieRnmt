% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/01_preprocessing.R
\name{clean_text}
\alias{clean_text}
\title{Clean and Normalize Text for Language Detection and Translation}
\usage{
clean_text(
  x,
  text_col = "text",
  id_col = NULL,
  lang_guess_col = NULL,
  replace_emojis = TRUE,
  replace_alphaless = TRUE,
  max_char = 5000,
  return_string = FALSE,
  verbose = TRUE
)
}
\arguments{
\item{x}{Character vector or data.frame containing texts to clean.}

\item{text_col}{Character, name of the text column if \code{x} is a data.frame.
Ignored if \code{x} is a character vector. Default = "text".}

\item{id_col}{Character, optional column name in the input data.frame to
preserve as an identifier. Default = NULL.}

\item{lang_guess_col}{Character, optional column name in the input data.frame
to preserve as a column named \code{lang_guess}. Default = NULL.}

\item{replace_emojis}{Logical, whether to replace emojis with placeholder names.
Default = TRUE.}

\item{replace_alphaless}{Logical, whether to replace strings that contain no
alphabetic characters with empty strings. Default = TRUE.}

\item{max_char}{Integer, maximum number of characters per text. Texts longer
than this are truncated. Default = 5000.}

\item{return_string}{Logical, if TRUE, return only the cleaned character vector
(\code{text_clean}) instead of a full data.table. Default = FALSE.}

\item{verbose}{Logical, whether to print progress messages. Default = TRUE.}
}
\value{
Either:
\itemize{
\item A data.table with columns:
\itemize{
\item \code{row_id}: Row index of the input.
\item \code{id}: User-provided identifier, if available.
\item \code{text_orig}: Original text before cleaning.
\item \code{text_clean}: Cleaned and normalized text.
\item \code{lang_guess}: Optional language guess column, if present.
}
\item Or a character vector of cleaned texts if \code{return_string = TRUE}.
}
}
\description{
Cleans and normalizes raw text data in preparation for language
detection and machine translation. Handles emoji replacement, removal of
unsupported characters, trimming, squishing whitespace, and limiting text
length. Returns either a standardized data.table or a character vector.
}
\details{
The cleaning pipeline performs the following steps:
\enumerate{
\item Convert input to UTF-8.
\item Replace \code{NA} with empty strings.
\item Optionally replace emojis with placeholder names if
\code{replace_emojis = TRUE}.
\item Remove all characters except letters, numbers, punctuation, and
whitespace.
\item Normalize encoding to UTF-8 and substitute invalid bytes.
\item Truncate texts longer than \code{max_char}.
\item Optionally remove texts without alphabetic content if
\code{replace_alphaless = TRUE}.
\item Collapse multiple spaces into a single space.
}

The returned data.table is restricted to the columns
\code{row_id}, \code{id} (if present), \code{text_orig}, \code{text_clean},
and \code{lang_guess} (if present), in this fixed order.
}
